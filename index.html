
<!doctype html>
<html lang="zh" xmlns="http://www.w3.org/1999/html">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="static/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="static/css/app.css"/>

    <!-- test use script -->
<!--    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>-->
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>

    <script type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/cookie-bar/cookiebar-latest.min.js?theme=grey&tracking=1&thirdparty=1&always=1&scrolling=1&remember=30"></script>
</head>
<body class="bg-dark text-light">
<div id="app" class="container-fluid">
    <div class="sticky-top border-bottom border-secondary bg-dark">
        <ul class="nav nav-pills" id="navTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link text-light active" id="style-tab" data-toggle="tab" href="#style" role="tab"
                   aria-controls="style" aria-selected="true">选项</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" id="artifacts-tab" data-toggle="tab" href="#artifactab" role="tab"
                   aria-controls="artifactab" aria-selected="false">输入</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" id="reccs-tab" data-toggle="tab" href="#reccs" role="tab"
                   aria-controls="reccs" aria-selected="false">圣物</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" id="books-tab" data-toggle="tab" href="#books" role="tab" aria-controls="books"
                   aria-selected="false">红书</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" id="dark-tab" data-toggle="tab" href="#dark" role="tab" aria-controls="dark"
                   aria-selected="false">永恒黑暗</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" id="log-tab" data-toggle="tab" href="#log" role="tab" aria-controls="log"
                   aria-selected="false">日志</a>
            </li>
        </ul>
        <h1 class="h4">TT2 优化器（by 月檬） <span class="badge badge-secondary">3.1.1</span></h1>
    </div>
    <div class="tab-content" id="tabContent">
        <div class="tab-pane fade show active" id="style" role="tabpanel" aria-labelledby="style-tab">
            <form>
                <div class="form-row mb-4">
                    <div class="form-group col-12 col-md-6 col-lg-4">
                        <label for="build">主要伤害来源</label>
                        <select class="form-control" id="build" onchange="adjustWeights();">
                            <option value="pet">宠物</option>
                            <option value="hs">天堂圣击</option>
                            <option value="sc">影分身术</option>
                            <option value="cs">部落战舰</option>
                        </select>
                    </div>
                    <div class="form-group col-12 col-md-6 col-lg-4">
                        <label for="hero">最强英雄</label>
                        <select class="form-control" id="hero" onchange="adjustWeights();">
                            <option value="maya">守望者玛雅·穆塔</option>
                            <option value="zato">盲棍大师扎托</option>
                            <option value="sophia">剑之勇士索菲亚</option>
                            <option value="lance">钴钢骑士兰斯</option>
                            <option value="pingo">托利族的平哥</option>
                            <option value="rosabella">弓箭手罗莎贝拉·邦妮</option>
                            <option value="gulbrand">毁灭者布尔兰德</option>
                            <option value="davey">戴维·加农船长</option>
                            <option value="rhys">伊维塔教团法师里斯</option>
                            <option value="kronus">审判使者克洛诺斯</option>
                            <option value="cosette">佩剑家族之宝柯赛特</option>
                            <option value="kiki">龙骑士琪琪</option>
                            <option value="maddie">影子盗贼玛迪</option>
                            <option value="beany">豆芽一世</option>
                            <option value="sawyer">荒野枪手索耶</option>
                            <option value="ursa">小熊乌尔沙</option>
                            <option value="saje">花园守护者萨杰</option>
                            <option value="wally">魔法师瓦利瓦</option>
                            <option value="jayce">冷血屠夫杰斯</option>
                            <option value="pharaoh">大法老</option>
                            <option value="boomoh">布莫医生</option>
                            <option value="dex">Dex-1000</option>
                            <option value="cass">贵夫人卡斯</option>
                            <option value="lala">快箭手拉拉</option>
                            <option value="aya">闪电紫罗兰阿雅</option>
                            <option value="lucy">暗夜术士露西女士</option>
                            <option value="jazz">爵士摇滚乐手</option>
                            <option value="maple">秋季卫士阿枫</option>
                            <option value="kin">蓬蓬兽阿金</option>
                            <option value="titania">仙子公主泰坦尼娅</option>
                            <option value="miki">优雅舞者米琪</option>
                            <option value="mina">光之女祭司米娜</option>
                            <option value="yzafa">恐怖大盗伊扎法</option>
                            <option value="zolom">太空猎人佐龙·布拉斯特</option>
                            <option value="finn">怪异卫兵费恩</option>
                            <option value="nohni">矛灵诺尼</option>
                            <option value="damon">黑暗达蒙</option>
                        </select>
                    </div>
                    <div class="form-group col-12 col-md-6 col-lg-4">
                        <label for="gold">主要金币来源</label>
                        <select class="form-control" id="gold" onchange="adjustWeights();">
                            <option value="all">全部</option>
                            <option value="boss">头目</option>
                            <option value="coc">宝箱</option>
                            <option value="fairy">仙女</option>
                            <option value="phom">米心</option>
                        </select>
                    </div>
                    <div class="form-group col-12 col-md-6 col-lg-4">
                        <label for="active">在线或离线</label>
                        <select class="form-control" id="active" onchange="adjustWeights();">
                            <option value="online">在线</option>
                            <option value="offline">离线</option>
                        </select>
                    </div>
                    <div class="form-check col-12 col-md-6 col-lg-4 mb-4">
                        <div class="mb-2">提高溅射伤害</div>
                        <div class="btn-group btn-group-toggle" data-toggle="buttons">
                            <label id="btndry" class="btn btn-dark">
                                <input type="radio" name="splash" id="dry" autocomplete="off" checked
                                       onchange="toggleSplash();"> 否
                            </label>
                            <label id="btnwet" class="btn btn-info">
                                <input type="radio" name="splash" id="wet" autocomplete="off"
                                       onchange="toggleSplash();"> 是
                            </label>
                        </div>
                    </div>
                </div>
            </form>
            <button type="button" class="btn btn-secondary mb-4" onclick="exportData()">导出数据</button>
            <button type="button" class="btn btn-secondary mb-4" onclick="startImport()">导入数据</button>
            <div id="export_wrap">
                <div class="mb-2">将以下导出的数据复制以在其他地方导入</div>
                <code class="mb-5" id="export"></code>
                <div class="mt-5 mb-5">&#x00A0;</div>
            </div>
            <div id="import_wrap">
                <div class="mb-2">在此粘贴其他地方导出的数据。请注意：这不能被撤销</div>
                <div class="form-group col-12">
                    <textarea class="form-control mb-2" id="import" rows="10"></textarea>
                    <button type="button" class="btn btn-info mb-4" onclick="importData()">开始导入</button>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="artifactab" role="tabpanel" aria-labelledby="artifacts-tab">
            <p>请在下面输入您的神器和技能等级，以生成圣物和技能的升级建议方案</p>
            <h5>神器</h5>
            <p>填写您当前已有神器的级别。如您不希望获得某项神器的升级，请取消勾选。如您还没有获得该神器，请设置它的级别为 0 ，我们这将会在适当的时候推荐您积攒圣物以挖掘新的神器</p>
            <p>如果这是您第一次使用该工具，请关闭自动计算功能，直到完成神器等级的录入，以防止该工具在录入时不断计算影响流畅度，特别是如果您的神器等级很高，这就尤为重要</p>
            <div class="btn-group btn-group-toggle mb-2" data-toggle="buttons">
                <label id="btnrecalcon" class="btn btn-primary active">
                    <input type="radio" name="recalc" id="recalc_on" autocomplete="off" checked
                           onchange="updateRecalc();"> 自动计算：开
                </label>
                <label id="btnrecalcoff" class="btn btn-secondary">
                    <input type="radio" name="recalc" id="recalc_off" autocomplete="off" onchange="updateRecalc();">
                    自动计算：关
                </label>
            </div>
            <p>神器伤害： <span id="adsanity">0%</span></p>
            <button type="button" class="btn btn-primary mb-3" onclick="checkAllArtifacts();">选中全部</button>
            <button type="button" class="btn btn-secondary mb-3" onclick="dalViewArtifact(1);">截图模式</button>
            <div class="col-12 col-md-8 col-lg-6">
                <div class="row mb-2 ml-2">
                    图例：
                    <span class="badge badge-pill badge-info ml-2">全部提升</span>
                    <span class="badge badge-pill badge-success ml-2">主要伤害提升</span>
                    <span class="badge badge-pill badge-secondary ml-2">次要伤害提升</span>
                    <span class="badge badge-pill badge-warning ml-2">金币提升</span>
                    <span class="badge badge-pill badge-danger ml-2">神器伤害提升</span>
                </div>
                <table class="table table-striped table-sm table-dark">
                    <thead>
                    <tr>
                        <th scope="col"></th>
                        <th scope="col">神器</th>
                        <th scope="col">等级</th>
                        <th scope="col">收益</th>
                        <th scope="col">说明</th>
                    </tr>
                    </thead>
                    <tbody id="artifacts">
                    </tbody>
                </table>
            </div>
        </div>
        <div class="tab-pane fade" id="dal" role="tabpanel" aria-labelledby="dal-tab">
            <div class="row mb-4" id="daltifacts">
            </div>
            <button type="button" class="btn btn-secondary mb-3" onclick="dalViewArtifact(0);">退出截图模式</button>
        </div>
        <div class="tab-pane fade" id="reccs" role="tabpanel" aria-labelledby="reccs-tab">
            <div id="relicreccs">
                <p>请输入预计花费的圣物数量： <br/>
                    <small>强制四舍五入</small>
                </p>
                <form class="mb-4">
                    <div class="input-group col-12 col-md-6 col-xl-4">
                        <input type="tel" id="relics" class="form-control" placeholder="#"
                               aria-label="whole numbers for relics">
                        <span class="input-group-text bg-dark text-light px-1 rounded-0">.</span>
                        <input type="tel" id="relics_decimal" class="form-control" placeholder="##"
                               aria-label="decimals for relics">
                        <select id="relic_factor">
                            <option value="e0"></option>
                            <option value="e3">K</option>
                            <option value="e6">M</option>
                            <option value="e9">B</option>
                            <option value="e12">T</option>
                            <option value="e13">e13</option>
                            <option value="e14">e14</option>
                            <option value="e15">e15/aa</option>
                            <option value="e16">e16</option>
                            <option value="e17">e17</option>
                            <option value="e18">e18/ab</option>
                            <option value="e19">e19</option>
                            <option value="e20">e20</option>
                            <option value="e21">e21/ac</option>
                            <option value="e22">e22</option>
                            <option value="e23">e23</option>
                            <option value="e24">e24/ad</option>
                            <option value="e25">e25</option>
                            <option value="e26">e26</option>
                            <option value="e27">e27/ae</option>
                            <option value="e28">e28</option>
                            <option value="e29">e29</option>
                            <option value="e30">e30/af</option>
                            <option value="e31">e31</option>
                            <option value="e32">e32</option>
                            <option value="e33">e33/ag</option>
                            <option value="e34">e34</option>
                            <option value="e35">e35</option>
                            <option value="e36">e36/ah</option>
                            <option value="e37">e37</option>
                            <option value="e38">e38</option>
                            <option value="e39">e39/ai</option>
                            <option value="e40">e40</option>
                            <option value="e41">e41</option>
                            <option value="e42">e42/aj</option>
                            <option value="e43">e43</option>
                            <option value="e44">e44</option>
                            <option value="e45">e45/ak</option>
                            <option value="e46">e46</option>
                            <option value="e47">e47</option>
                            <option value="e48">e48/al</option>
                            <option value="e49">e49</option>
                            <option value="e50">e50</option>
                            <option value="e51">e51/am</option>
                            <option value="e52">e52</option>
                            <option value="e53">e53</option>
                            <option value="e54">e54/an</option>
                            <option value="e55">e55</option>
                            <option value="e56">e56</option>
                            <option value="e57">e57/ao</option>
                            <option value="e58">e58</option>
                            <option value="e59">e59</option>
                            <option value="e60">e60/ap</option>
                            <option value="e61">e61</option>
                            <option value="e62">e62</option>
                            <option value="e63">e63/aq</option>
                            <option value="e64">e64</option>
                            <option value="e65">e65</option>
                            <option value="e66">e66/ar</option>
                            <option value="e67">e67</option>
                            <option value="e68">e68</option>
                            <option value="e69">e69/as</option>
                            <option value="e70">e70</option>
                            <option value="e71">e71</option>
                            <option value="e72">e72/at</option>
                            <option value="e73">e73</option>
                            <option value="e74">e74</option>
                            <option value="e75">e75/au</option>
                            <option value="e76">e76</option>
                            <option value="e77">e77</option>
                            <option value="e78">e78/av</option>
                            <option value="e79">e79</option>
                            <option value="e80">e80</option>
                            <option value="e81">e81/aw</option>
                            <option value="e80">e82</option>
                            <option value="e80">e83</option>
                            <option value="e80">e84/ax</option>
                            <option value="e80">e85</option>
                            <option value="e80">e86</option>
                            <option value="e80">e87/ay</option>
                            <option value="e80">e88</option>
                            <option value="e80">e89</option>
                            <option value="e80">e90/az</option>
                            <option value="e80">e91</option>
                            <option value="e80">e92</option>
                            <option value="e80">e93/ba</option>
                            <option value="e80">e94</option>
                            <option value="e80">e95</option>
                            <option value="e80">e96/bb</option>
                            <option value="e80">e97</option>
                            <option value="e80">e98</option>
                            <option value="e80">e99/bc</option>
                            <option value="e80">e100</option>
                            <option value="e80">e101</option>
                            <option value="e80">e102/bd</option>
                            <option value="e80">e103</option>
                            <option value="e80">e104</option>
                            <option value="e80">e105/be</option>
                            <option value="e80">e106</option>
                            <option value="e80">e107</option>
                            <option value="e80">e108/bf</option>
                            <option value="e80">e109</option>
                            <option value="e80">e110</option>
                            <option value="e80">e111/bh</option>
                            <option value="e80">e112</option>
                            <option value="e80">e113</option>
                            <option value="e80">e114/bi</option>
                            <option value="e80">e115</option>
                            <option value="e80">e116</option>
                            <option value="e80">e117/bj</option>
                            <option value="e80">e118</option>
                            <option value="e80">e119</option>
                            <option value="e80">e120/bk</option>
                        </select>
                    </div>
                    <label class="ml-4">
                        <small>（整数在左，小数在右）</small>
                    </label>
                </form>
                <form class="mb-4">
                    <div class="input-group col-12 col-md-6 col-xl-4 mb-2">
                        <span class="input-group-text bg-dark text-light">购买指数*</span>
                        <select id="ocd">
                            <option value="1">1</option>
                            <option value="10">10</option>
                            <option value="100">100</option>
                            <option value="1000">1000</option>
                            <option value="pct1">1%</option>
                            <option value="pct5">5%</option>
                            <option value="pct25">25%</option>
                            <option value="pct100">MAX</option>
                        </select>
                    </div>
                    <div class="input-group col-12 col-md-6 col-xl-4 mb-2">
                        <span class="input-group-text bg-dark text-light">花费</span>
                        <input type="tel" id="spend" class="form-control" placeholder="#"
                               aria-label="whole numbers for relic spend">
                        <span class="input-group-text bg-dark text-light px-1 rounded-0">.</span>
                        <input type="tel" id="spend_decimal" class="form-control" placeholder="##"
                               aria-label="decimals for relic spend">
                        <span class="input-group-text bg-dark text-light">% 的圣物**</span>
                    </div>
                </form>
                <button id="generateRelicUpdates" type="button" class="btn btn-primary mb-4"
                        onclick="generateUpgrades()">Generate Upgrades
                </button>
                <label class="ml-4">
                    <small>**Note, this only applies to %-based recommendations.</small>
                </label>
            </div>
            <div id="relicsuggs">
                <div class="row mb-2 ml-2">
                    图例：
                    <span class="badge badge-pill badge-info ml-2">全部提升</span>
                    <span class="badge badge-pill badge-success ml-2">主要伤害提升</span>
                    <span class="badge badge-pill badge-secondary ml-2">次要伤害提升</span>
                    <span class="badge badge-pill badge-warning ml-2">金币提升</span>
                    <span class="badge badge-pill badge-danger ml-2">神器伤害提升</span>
                </div>
                <div class="col-12 col-md-8 col-lg-6 mb-4">
                    <div class="progress mb-3 border border-dark" id="progressBar">
                        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0"
                             aria-valuemax="100" style="width: 0%" id="progress"></div>
                    </div>
                    <div id="pudding" class="mb-4"></div>
                    <div id="suggestions"></div>
                    <p id="accept2">如果您购买了所有这些升级，请点击完成按钮更新神器表</p>
                    <div id="accept"></div>
                    <p id="new_artifact" class="ml-2"></p>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="books" role="tabpanel" aria-labelledby="books-tab">
            <p><h1 class="h4">暗影之书占比计算</h1></p>
            <table class="table table-striped table-sm table-dark">
                <tr>
                    <td><label>总圣物量</label></td>
                    <td><input v-model.lazy.trim="totalRelics" type="number" class="form-control artlvl" placeholder="0"></td>
                </tr>
                <tr>
                    <td><label>红书等级</label></td>
                    <td><input v-model.lazy.trim="bosLevel" type="number" class="form-control artlvl" placeholder="0"></td>
                </tr>
                <tr>
                    <td><label>红书所占比例</label></td>
                    <td>{{bookRatio}}</td>
                </tr>
            </table>
            <div class="line"></div>
            <p><h1 class="h4">暗影之书等级推荐</h1>关卡数请填入平時蜕变关卡，非最高关卡</p>
            <table class="table table-striped table-sm table-dark">
                <tr>
                    <td><label>蜕变关卡数</label></td>
                    <td><input v-model.lazy.number.trim="bookSet.stage" type="number" class="form-control artlvl" placeholder="0"></td>
                </tr>
                <tr>
                    <td><label for="hero">神话套数</label></td>
                    <td><input v-model.lazy.number.trim="bookSet.mythic" type="number" class="form-control artlvl" placeholder="0"></td>
                </tr>
                <tr>
                    <td><label for="hero">工艺等级(电源吕)</label></td>
                    <td><input v-model.lazy.number.trim="bookSet.crafting" type="number" class="form-control artlvl" placeholder="0"></td>
                </tr>
            </table>
            <table class="table table-striped table-sm table-dark">
                <tbody>
                    <tr>
                        <th>基础圣物</th>
                        <td>{{bookLevel.relics}}</td>
                    </tr>
                    <tr>
                        <th>低标</th>
                        <td>{{bookLevel.low}}</td>
                    </tr>
                    <tr>
                        <th>均标</th>
                        <td>{{bookLevel.normal}}</td>
                    </tr>
                    <tr>
                        <th>高标</th>
                        <td>{{bookLevel.high}}</td>
                    </tr>
                    <tr>
                        <th>红书是我的命</th>
                        <td>{{bookLevel.veryHigh}}</td>
                    </tr>
                    <tr>
                        <th>我就是红书</th>
                        <td>{{bookLevel.superHigh}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tab-pane fade" id="dark" role="tabpanel" aria-labelledby="dark-tab">
            <p><h1 class="h4">永恒黑暗等级计算器</h1>需要有死灵神话套装</p>
            <div class="form-row mb-4">
                <div class="form-group col-12 col-md-6 col-lg-4">
                    <label>极限关卡</label>
                    <input v-model.lazy.number.trim="edSet.stage" type="number" class="form-control artlvl" placeholder="0">
                </div>
                <div class="form-group col-12 col-md-6 col-lg-4">
                    <label for="hero">威吓等级</label>
                    <input v-model.lazy.number.trim="edSet.intimidate" type="number" class="form-control artlvl" placeholder="0">
                </div>
                <div class="form-group col-12 col-md-6 col-lg-4">
                    <label for="hero">神秘冲击等级</label>
                    <input v-model.lazy.number.trim="edSet.impact" type="number" class="form-control artlvl" placeholder="0">
                </div>
                <div class="form-group col-12 col-md-6 col-lg-4">
                    <label for="hero">讨价还价等级</label>
                    <input v-model.lazy.number.trim="edSet.arcane" type="number" class="form-control artlvl" placeholder="0">
                </div>
                <div class="form-group col-12 col-md-6 col-lg-4">
                    <label for="hero">周年白金加成</label>
                    <input v-model.lazy.number.trim="edSet.platinum" type="number" class="form-control artlvl" placeholder="没有周年白金就填1">
                </div>
            </div>
            <table class="table table-striped table-sm table-dark">
                <tbody>
                <tr>
                    <th>触发炸弹后的需求(黑暗永恒等级)</th>
                    <td>{{edLevel.snapTitan}}({{edLevel.halfNeed}})</td>
                </tr>
                <tr>
                    <th>最大飞溅需求(黑暗永恒等级)</th>
                    <td>{{edLevel.actTitan-1}}({{edLevel.maxNeed}})</td>
                </tr>
                <tr>
                    <th>双炸弹叠加需求(黑暗永恒等级)</th>
                    <td>{{edLevel.halfSnapTitan-1}}({{edLevel.doubleHalfNeed}})</td>
                </tr>
                <tr>
                    <th>黑暗永恒25级飞溅数</th>
                    <td>{{edLevel.maxSnap}}</td>
                </tr>
                <tr>
                    <th>原始小怪数</th>
                    <td>{{edLevel.oriTitan}}</td>
                </tr>
                <tr>
                    <th>实际小怪数</th>
                    <td>{{edLevel.actTitan}}</td>
                </tr>
                <tr>
                    <th>触发炸弹怪后小怪数</th>
                    <td>{{edLevel.snapTitan}}</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="tab-pane fade" id="log" role="tabpanel" aria-labelledby="log-tab">
            <table class="table table-striped table-sm table-dark">
                <thead>
                    <tr>
                        <th style="min-width: 90px;">日期</th>
                        <th>内容</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="(value,key) in log">
                        <td>{{key}}</td>
                        <td v-html="value"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-122092023-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'UA-122092023-1');
</script>

<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="static/js/jquery-3.2.1.slim.min.js"></script>
<script src="static/js/bootstrap.bundle.min.js"></script>
<script src="static/js/decimal.min.js"></script>
<!--<script src="static/js/data.min.js"></script>-->
<!--<script src="static/js/weights.min.js"></script>-->
<!--<script src="static/js/app.min.js"></script>-->
<script src="static/js/data.js"></script>
<script src="static/js/weights.js"></script>
<script src="static/js/app.js"></script>
</body>
</html>
